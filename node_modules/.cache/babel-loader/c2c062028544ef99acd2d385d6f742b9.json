{"ast":null,"code":"import r from \"immer\";\nimport { useState as n, useCallback as t, useMemo as o, useReducer as i } from \"react\";\n\nfunction u(o) {\n  var i = n(o),\n      u = i[1];\n  return [i[0], t(function (n) {\n    u(r(n));\n  }, [])];\n}\n\nfunction e(n, t, u) {\n  var e = o(function () {\n    return r(n);\n  }, [n]);\n  return i(e, t, u);\n}\n\nexport { u as useImmer, e as useImmerReducer };","map":{"version":3,"sources":["../src/index.ts"],"names":["useImmer","initialValue","updateValue","useState","useCallback","produce","updater","useImmerReducer","reducer","initialState","initialAction","cachedReducer","useMemo","useReducer"],"mappings":";;;SAgBgBA,C,CAASC,C,EAAAA;AAAAA,MAAAA,CAAAA,GACIE,CAAAA,CAASF,CAATE,CADJF;AAAAA,MACXC,CAAAA,GAAAA,CAAAA,CAAAA,CAAAA,CADWD;AAEvB,SAAO,CAAA,CAAA,CAAA,CAAA,CAAA,EAELG,CAAAA,CAAY,UAAA,CAAA,EAAA;AACVF,IAAAA,CAAAA,CAAYG,CAAAA,CAAQC,CAARD,CAAZH,CAAAA;AAAoBI,GADtBF,EAEG,EAFHA,CAFK,CAAP;AAIK;;AAAA,SASSG,CATT,CASyBC,CATzB,EASkCC,CATlC,EASgDC,CAThD,EASgDA;AACrD,MAAMC,CAAAA,GAAgBC,CAAAA,CAAQ,YAAA;AAAA,WAAMP,CAAAA,CAAQG,CAARH,CAAN;AAAcG,GAAtBI,EAAgC,CAACJ,CAAD,CAAhCI,CAAtB;AACA,SAAOC,CAAAA,CAAWF,CAAXE,EAA0BJ,CAA1BI,EAA+CH,CAA/CG,CAAP;AAAsDH;;AAAAA,SAAAA,CAAAA,IAAAA,QAAAA,EAAAA,CAAAA,IAAAA,eAAAA","sourcesContent":["import produce, { Draft } from \"immer\";\nimport { useState, useReducer, useCallback, useMemo, Dispatch } from \"react\";\n\nexport type Reducer<S = any, A = any> = (\n  draftState: Draft<S>,\n  action: A\n) => void | S;\n\nexport type Updater<S> = (f: (draft: Draft<S>) => void | S) => void;\n\nexport type ImmerHook<S> = [S, Updater<S>];\n\nexport function useImmer<S = any>(\n  initialValue: S | (() => S)\n): [S, (f: (draft: Draft<S>) => void | S) => void];\n\nexport function useImmer(initialValue: any) {\n  const [val, updateValue] = useState(initialValue);\n  return [\n    val,\n    useCallback(updater => {\n      updateValue(produce(updater));\n    }, [])\n  ];\n}\n\nexport function useImmerReducer<S = any, A = any>(\n  reducer: Reducer<S, A>,\n  initialState: S,\n  initialAction?: (initial: any) => S\n): [S, Dispatch<A>];\nexport function useImmerReducer(reducer, initialState, initialAction) {\n  const cachedReducer = useMemo(() => produce(reducer), [reducer]);\n  return useReducer(cachedReducer, initialState as any, initialAction);\n}\n"]},"metadata":{},"sourceType":"module"}